generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Unverified_Users {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  email     String   @unique
  username  String
  password  String
  otp       String?
}

model Users {
  id           Int          @id @default(autoincrement())
  createdAt    DateTime     @default(now())
  updatedAt    DateTime     @updatedAt
  email        String       @unique
  username     String
  password     String
  hashRT       String?
  role         Role         @default(USER)
  signInMethod String       @default("local.com")
  onBoarded    Boolean      @default(false)
  brand        Brand[]
  SavedWeb     SavedWeb[]
  ReleasedWeb  ReleasedWeb?
}

model Brand {
  id                   Int          @id @default(autoincrement())
  createdAt            DateTime     @default(now())
  updatedAt            DateTime     @updatedAt
  owner                Users        @relation(fields: [ownerId], references: [id])
  ownerId              Int
  brandName            String
  companyName          String
  officialPhone        String
  officialEmail        String
  customerServicePhone String?
  customerServiceEmail String
  logo                 String?
  instagramAccount     String?
  facebookAccount      String?
  otherAccount         String?
  description          String       @default("")
  privacyPolicy        String?
  termsAndConditions   String?
  motto                String?
  category             String
  verified             Boolean      @default(false)
  link                 String       @unique()
  ReleasedWeb          ReleasedWeb?

  @@map("Brand")
}

model SavedWeb {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  owner     Users    @relation(fields: [ownerId], references: [id])
  ownerId   Int
  blueprint Json
  name      String
}

model ReleasedWeb {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  owner     Users    @relation(fields: [ownerId], references: [id])
  ownerId   Int      @unique
  brand     Brand    @relation(fields: [brandId], references: [id])
  brandId   Int      @unique
  blueprint Json
}

model PasswordOtp {
  id        Int    @id @default(autoincrement())
  hashOtp   String
  user_mail String @unique
}

enum Role {
  USER
  ADMIN
}
